@inject UsuarioEstadoService _usuarioEstadoService


<MudNavMenu>    
    <MudNavGroup Title="Mantenimiento" Icon="@Icons.Material.Filled.Add">
        <MudNavGroup Title="Productos" Icon="@Icons.Material.Filled.ProductionQuantityLimits">
            <MudNavLink Href="producto" Match="NavLinkMatch.Prefix">Producto</MudNavLink>
            <MudNavLink Href="marca" Match="NavLinkMatch.Prefix">Marca</MudNavLink>
            <MudNavLink Href="tipoImpuesto" Match="NavLinkMatch.Prefix">Tipo Impuesto</MudNavLink>
            <MudNavLink Href="categoria" Match="NavLinkMatch.Prefix">Categoria</MudNavLink>
            <MudNavLink Href="presentacion" Match="NavLinkMatch.Prefix">Presentacion</MudNavLink>
        </MudNavGroup> 
        <MudNavGroup Title="Servicios" Icon="@Icons.Material.Filled.RoomService">
            <MudNavLink Href="servicio" Match="NavLinkMatch.Prefix">Servicios</MudNavLink>
            <MudNavLink Href="tiposervicio" Match="NavLinkMatch.Prefix">Tipos de Servicio</MudNavLink>
        </MudNavGroup>
        <MudNavGroup Title="Clientes" Icon="@Icons.Material.Filled.AccountCircle">
            <MudNavLink Href="tipoDocIdentidad" Match="NavLinkMatch.Prefix">Tipo Doc. Identidad</MudNavLink>
            <MudNavLink Href="cliente" Match="NavLinkMatch.Prefix">Clientes</MudNavLink>
            <MudNavLink Href="ciudad" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AddHome">Ciudades</MudNavLink>
        </MudNavGroup>        
    </MudNavGroup>

    <MudNavGroup Title="Operaciones" Icon="@Icons.Material.Filled.AddBusiness">
        <MudNavLink Href="lista-venta" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.List">Lista de Ventas</MudNavLink>
        <MudNavLink Href="ventas" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AddShoppingCart">Ventas</MudNavLink>
    </MudNavGroup>

    @if (_usuarioEstadoService.CurrentUser?.Rol == "Admin")
    {
        <MudNavGroup Title="Opciones" Icon="@Icons.Material.Filled.Accessibility">
            <MudNavLink Href="timbrado" Match="NavLinkMatch.Prefix">Timbrados</MudNavLink>
            <MudNavLink Href="rangos-timbrados" Match="NavLinkMatch.Prefix">Rango de Timbrados</MudNavLink>
            <MudNavLink Href="usuario" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AccountCircle">Usuarios</MudNavLink>
        </MudNavGroup>
    }
    
  
</MudNavMenu>


@code {
    protected override void OnInitialized()
    {
        _usuarioEstadoService.StateChanged += OnUsuarioStateChanged;
    }

    private void OnUsuarioStateChanged()
    {
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        _usuarioEstadoService.StateChanged -= OnUsuarioStateChanged;
    }
}